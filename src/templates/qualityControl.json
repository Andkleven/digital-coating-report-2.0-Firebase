{
  "queryPath": "items.0.finalInspectionQualityControls",
  "specQueryPath": "items.0.leadEngineers",
  "mutation": "QUALITY_CONTROL",
  "chapterByStage": true,
  "query": "QUALITY_CONTROL",
  "chapters": {
    "qualityControl": {
      "queryPath": "finalInspectionQualityControls",
      "pages": [
        {
          "pageTitle": "Final Inspection",
          "repeat": true,
          "notAddButton": true,
          "repeatGroupWithQuerySpecData": true,
          "repeatGroupWithQuery": "leadEngineers.data.measurementPoint",
          "queryPath": "finalInspectionQualityControls.0.measurementPointQualityControls",
          "fields": [
            {
              "fieldName": "measurementPoint",
              "queryVariableLabel": {
                "coatedItem": [
                  "leadEngineers.measurementPointActualTdvs",
                  "data.referencePoint"
                ]
              },
              "variableLabelSpec": true,
              "label": {
                "coatedItem": "Measurement Point Reference: {}",
                "mould": "Measurement Point"
              },
              "calculateMin": {
                "coatedItem": "qualityControlMeasurementPointCoatingItemMin",
                "mould": "qualityControlMeasurementPointMouldMin"
              },
              "calculateMax": {
                "coatedItem": "qualityControlMeasurementPointCoatingItemMax",
                "mould": "qualityControlMeasurementPointMouldMax"
              },
              "ignoreMin": true,
              "ignoreMax": true,
              "type": "number",
              "required": true,
              "unit": "mm"
            }
          ]
        },
        {
          "queryPath": "finalInspectionQualityControls",
          "fields": [
            {
              "showField": {
                "coatedItem": true
              },
              "fieldName": "totalOd",
              "label": "Total OD (Pi-tape)",
              "type": "checkbox",
              "required": true,
              "subtext": "APS. Final measurements are within tolerances.",
              "showFieldSpecPath": "leadEngineers.data.totalOd"
            },
            {
              "showField": {
                "mould": true
              },
              "fieldName": "totalCoatingThickness",
              "label": "Total Coating Thickness",
              "type": "checkbox",
              "required": true,
              "subtext": "APS. Final measurements are within tolerances.",
              "showFieldSpecPath": "leadEngineers.data.totalCoatingThickness"
            },
            {
              "fieldName": "visualInspection",
              "label": "Visual Inspection",
              "type": "checkbox",
              "subtext": "APS Repair Procedure. Free from defects. Cosmetic defects may be accepted.",
              "required": true,
              "showFieldSpecPath": "leadEngineers.data.visualInspection"
            },
            {
              "fieldName": "simpleFinalDimensionsCheck",
              "label": "Simple Final Dimensions Check",
              "subtext": "APS. All parts in accordance to drawings.",
              "type": "checkbox",
              "required": true,
              "showFieldSpecPath": "leadEngineers.data.simpleFinalDimensionsCheck"
            },
            {
              "fieldName": "sparkTest",
              "label": "Spark Test",
              "subtext": "TR 2028. No Holidays.",
              "type": "checkbox",
              "required": true,
              "showFieldSpecPath": "leadEngineers.data.sparkTest"
            },
            {
              "fieldName": "hammerTest",
              "label": "Hammer Test",
              "type": "checkbox",
              "subtext": "TR 2028. No change in audible pitch.",
              "required": true,
              "showFieldSpecPath": "leadEngineers.data.hammerTest"
            },
            {
              "fieldName": "identificationMarking",
              "label": "Identification Marking",
              "subtext": "ID matches 123.",
              "showFieldSpecPath": "leadEngineers.data.identificationMarking",
              "required": true,
              "type": "checkbox"
            },
            {
              "fieldName": "finalInspectionComment",
              "label": "Final Inspection Comment",
              "type": "comment"
            }
          ]
        },
        {
          "queryPath": "finalInspectionQualityControls.0.hardnessQualityControls",
          "repeat": true,
          "notAddButton": true,
          "repeatGroupWithQuerySpecData": true,
          "repeatGroupWithQuery": "leadEngineers.data.numberOfHardnessOfOuterLayer",
          "fields": [
            {
              "fieldName": "hardnessOfOuterLayer",
              "indexVariableLabel": true,
              "required": true,
              "label": "Hardness Of Outer Layer: {}",
              "unit": "Shore A",
              "type": "number"
            }
          ]
        },
        {
          "queryPath": "finalInspectionQualityControls.0.peelTestQualityControls",
          "repeat": true,
          "notAddButton": true,
          "repeatGroupWithQuerySpecData": true,
          "repeatGroupWithQuery": "leadEngineers.data.numberOfPeelTest",
          "fields": [
            {
              "fieldName": "peelTest",
              "indexVariableLabel": true,
              "required": true,
              "unit": "kg/25mm",
              "label": "Peel Test: {}",
              "type": "number"
            },
            {
              "fieldName": "peelTestConversion",
              "label": "Tolerated Minimum",
              "unit": "N/25mm",
              "math": "mathPeelTest",
              "type": "number"
            }
          ]
        },
        {
          "repeat": true,
          "notAddButton": true,
          "repeatGroupWithQuerySpecData": true,
          "repeatGroupWithQuery": "leadEngineers.finalInspectionDimensionsChecks",
          "queryPath": "finalInspectionQualityControls.0.finalInspectionDimensionsCheckQualityControls",
          "fields": [
            {
              "fieldName": "finalInspectionDimensionsChecks",
              "variableLabelSpec": true,
              "queryVariableLabel": [
                "leadEngineers.finalInspectionDimensionsChecks",
                "data.finalDimensionsReference"
              ],
              "label": "Final Dimensions Reference {}",
              "routeToSpecMin": [
                "leadEngineers.finalInspectionDimensionsChecks",
                "data.finalDimensionsMin"
              ],
              "routeToSpecMax": [
                "leadEngineers.finalInspectionDimensionsChecks",
                "data.finalDimensionsMax"
              ]
            }
          ]
        },
        {
          "repeat": true,
          "notAddButton": true,
          "repeatGroupWithQuerySpecData": true,
          "repeatGroupWithQuery": "leadEngineers.finalInspectionCustomTests",
          "queryPath": "finalInspectionQualityControls.0.finalInspectionCustomTestQualityControls",
          "fields": [
            {
              "specValueList": [
                "leadEngineers.finalInspectionCustomTests",
                "data.name"
              ],
              "label": "Custom Test Name"
            },
            {
              "specValueList": [
                "leadEngineers.finalInspectionCustomTests",
                "data.criteria"
              ],
              "label": "Custom Test Criteria"
            },
            {
              "fieldName": "test",
              "label": "Test"
            }
          ]
        },
        {
          "label": "File Upload",
          "type": "files",
          "queryPath": "finalInspectionQualityControls.0.uploadFiles",
          "description": true
        }
      ]
    }
  }
}
