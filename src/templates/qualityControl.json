{
  "getNewValue": "finalInspectionQualityControl.new.item",
  "getOldValue": "items",
  "mutation": "QUALITY_CONTROL",
  "chapterByStage": true,
  "query": "QUALITY_CONTROL",
  "chapters": {
    "qualityControl": {
      "queryPath": "finalInspectionQualityControl",
      "pages": [
        {
          "pageTitle": "Final Inspection",
          "repeat": true,
          "notAddButton": true,
          "repeatGroupWithQuerySpecData": true,
          "repeatGroupWithQuery": "leadEngineer.data.measurementPoint",
          "queryPath": "finalInspectionQualityControl.measurementPointQualityControls",
          "fields": [
            {
              "fieldName": "measurementPoint",
              "queryVariableLabel": {
                "coatedItem": [
                  "leadEngineer.measurementPointActualTdvs",
                  "data.referencePoint"
                ]
              },
              "variableLabelSpec": true,
              "label": {
                "coatedItem": "Measurement Point Reference: {}",
                "mould": "Measurement Point"
              },
              "calculateMin": {
                "coatedItem": "mathQualityControlMeasurementPointCoatingItemMin",
                "mould": "mathQualityControlMeasurementPointMouldMin"
              },
              "calculateMax": {
                "coatedItem": "mathQualityControlMeasurementPointCoatingItemMax",
                "mould": "mathQualityControlMeasurementPointMouldMax"
              },
              "ignoreMin": true,
              "ignoreMax": true,
              "type": "number",
              "required": true,
              "unit": "mm"
            }
          ]
        },
        {
          "queryPath": "finalInspectionQualityControl",
          "fields": [
            {
              "showField": {
                "coatedItem": true
              },
              "fieldName": "totalOd",
              "label": "Total OD (Pi-tape)",
              "type": "checkbox",
              "required": true,
              "subtext": "APS. Final measurements are within tolerances.",
              "showFieldSpecPath": "leadEngineer.data.totalOd"
            },
            {
              "showField": {
                "mould": true
              },
              "fieldName": "totalCoatingThickness",
              "label": "Total Coating Thickness",
              "type": "checkbox",
              "required": true,
              "subtext": "APS. Final measurements are within tolerances.",
              "showFieldSpecPath": "leadEngineer.data.totalCoatingThickness"
            },
            {
              "fieldName": "visualInspection",
              "label": "Visual Inspection",
              "type": "checkbox",
              "subtext": "APS Repair Procedure. Free from defects. Cosmetic defects may be accepted.",
              "required": true,
              "showFieldSpecPath": "leadEngineer.data.visualInspection"
            },
            {
              "fieldName": "simpleFinalDimensionsCheck",
              "label": "Simple Final Dimensions Check",
              "subtext": "APS. All parts in accordance to drawings.",
              "type": "checkbox",
              "required": true,
              "showFieldSpecPath": "leadEngineer.data.simpleFinalDimensionsCheck"
            },
            {
              "fieldName": "sparkTest",
              "label": "Spark Test",
              "subtext": "TR 2028. No Holidays.",
              "type": "checkbox",
              "required": true,
              "showFieldSpecPath": "leadEngineer.data.sparkTest"
            },
            {
              "fieldName": "hammerTest",
              "label": "Hammer Test",
              "type": "checkbox",
              "subtext": "TR 2028. No change in audible pitch.",
              "required": true,
              "showFieldSpecPath": "leadEngineer.data.hammerTest"
            },
            {
              "fieldName": "identificationMarking",
              "label": "Identification Marking",
              "subtext": "ID matches 123.",
              "showFieldSpecPath": "leadEngineer.data.identificationMarking",
              "required": true,
              "type": "checkbox"
            },
            {
              "fieldName": "finalInspectionComment",
              "label": "Final Inspection Comment",
              "type": "comment"
            }
          ]
        },
        {
          "queryPath": "finalInspectionQualityControl.hardnessQualityControls",
          "repeat": true,
          "notAddButton": true,
          "repeatGroupWithQuerySpecData": true,
          "repeatGroupWithQuery": "leadEngineer.data.numberOfHardnessOfOuterLayer",
          "fields": [
            {
              "fieldName": "hardnessOfOuterLayer",
              "indexVariableLabel": true,
              "required": true,
              "label": "Hardness Of Outer Layer: {}",
              "unit": "Shore A",
              "type": "number"
            }
          ]
        },
        {
          "queryPath": "finalInspectionQualityControl.peelTestQualityControls",
          "repeat": true,
          "notAddButton": true,
          "repeatGroupWithQuerySpecData": true,
          "repeatGroupWithQuery": "leadEngineer.data.numberOfPeelTest",
          "fields": [
            {
              "fieldName": "peelTest",
              "indexVariableLabel": true,
              "required": true,
              "unit": "kg/25mm",
              "label": "Peel Test: {}",
              "type": "number"
            },
            {
              "fieldName": "peelTestConversion",
              "label": "Tolerated Minimum",
              "unit": "N/25mm",
              "math": "mathPeelTest",
              "type": "number"
            }
          ]
        },
        {
          "repeat": true,
          "notAddButton": true,
          "repeatGroupWithQuerySpecData": true,
          "repeatGroupWithQuery": "leadEngineer.finalInspectionDimensionsChecks",
          "queryPath": "finalInspectionQualityControl.finalInspectionDimensionsCheckQualityControls",
          "fields": [
            {
              "fieldName": "finalInspectionDimensionsChecks",
              "variableLabelSpec": true,
              "queryVariableLabel": [
                "leadEngineer.finalInspectionDimensionsChecks",
                "data.finalDimensionsReference"
              ],
              "label": "Final Dimensions Reference {}",
              "routeToSpecMin": [
                "leadEngineer.finalInspectionDimensionsChecks",
                "data.finalDimensionsMin"
              ],
              "routeToSpecMax": [
                "leadEngineer.finalInspectionDimensionsChecks",
                "data.finalDimensionsMax"
              ]
            }
          ]
        },
        {
          "repeat": true,
          "notAddButton": true,
          "repeatGroupWithQuerySpecData": true,
          "repeatGroupWithQuery": "leadEngineer.finalInspectionCustomTests",
          "queryPath": "finalInspectionQualityControl.finalInspectionCustomTestQualityControls",
          "fields": [
            {
              "specValueList": [
                "leadEngineer.finalInspectionCustomTests",
                "data.name"
              ],
              "label": "Custom Test Name"
            },
            {
              "specValueList": [
                "leadEngineer.finalInspectionCustomTests",
                "data.criteria"
              ],
              "label": "Custom Test Criteria"
            },
            {
              "fieldName": "test",
              "label": "Test"
            }
          ]
        },
        {
          "label": "File Upload",
          "type": "files",
          "queryPath": "finalInspectionQualityControl.uploadFiles",
          "description": true
        }
      ]
    }
  }
}
